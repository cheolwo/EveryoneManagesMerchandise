@using BusinessData.ofAccount.ofModel
@using BusinessLogic.ofManager.ofGeneric
<MudTextField @bind-Value="BusinessNumber" Label="사업자등록번호"></MudTextField>
<MudButton OnClick=SearchBusinssUserByNumber>검색</MudButton>
@if(BusinessUser != null)
{
    <MudText>@BusinessUser.Name</MudText>
}
<CascadingValue Value=@this>
        @RenderFragment
</CascadingValue>

@code {
    [Inject] public IEntityManager<BusinessUser> ?BusinssUserManager { get; set; }
    public BusinessUser ?BusinessUser { get; set; }
    public RenderFragment? RenderFragment { get; set; }
    protected override void OnInitialized()
    {
        BusinessUser = new();
    }
    public string ?BusinessNumber { get; set; }
    public async Task SearchBusinssUserByNumber()
    {
        if (BusinessNumber != null)
        {
            var SearcgingBusinessUser = await BusinssUserManager!.GetByCodeAsync(BusinessNumber);
            if(SearcgingBusinessUser == null)
            {
                BusinessUser!.Name = "사업자가 없습니다.";
            }
            else
            {
                BusinessUser = SearcgingBusinessUser;
            }
        }
    } 
}